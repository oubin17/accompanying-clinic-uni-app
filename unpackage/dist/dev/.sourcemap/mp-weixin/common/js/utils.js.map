{"version":3,"file":"utils.js","sources":["common/js/utils.js"],"sourcesContent":["class Utils {\r\n\r\n\tconstructor() {\r\n\t\tthis.baseUrl = \"http://127.0.0.1:8080/accompanying-clinic/api\"\r\n\t}\r\n\r\n\t//获取用户信息\r\n\tgetUserInfo() {\r\n\t\t//调用登录的api\r\n\t\tuni.login({\r\n\t\t\tsuccess: res => {\r\n\t\t\t\tthis.request({\r\n\t\t\t\t\turl: '/user/login',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\"loginId\": \"1\",\r\n\t\t\t\t\t\t\"loginType\": \"1\",\r\n\t\t\t\t\t\t\"identifyType\": \"1\",\r\n\t\t\t\t\t\t\"identifyValue\": \"123456\"\r\n\t\t\t\t\t},\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\tconsole.log(res, 'res')\n\t\t\t\t\t},\n\t\t\t\t\tfail: res => {\n\t\t\t\t\t\tconsole.log(res, 'fail')\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\trequest(option = {\r\n\t\tshowLoading: false\r\n\t}) {\r\n\t\t//判断url是否存在\r\n\t\tif (!option.url) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\tif (option.showLoading) {\r\n\t\t\tthis.showLoading()\r\n\t\t}\r\n\t\tuni.request({\r\n\t\t\turl: this.baseUrl + option.url,\r\n\t\t\tdata: option.data ? option.data : {},\r\n\t\t\theader: option.header ? option.header : {},\r\n\t\t\tmethod: option.method ? option.method : \"GET\",\r\n\t\t\tsuccess: (response) => {\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t\t//后端返回的数据异常（接口调用成功，但是数据异常）\r\n\t\t\t\tif (response.data.success) {\r\n\t\t\t\t\t//将成功的结果返回\r\n\t\t\t\t\tif (option.success && typeof option.success == 'function') {\r\n\t\t\t\t\t\toption.success(response)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t//将失败的结果返回\r\n\t\t\t\t\tif (option.fail && typeof option.fail == 'function') {\r\n\t\t\t\t\t\toption.fail(response)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: response => {\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t\tconsole.log(response)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t//创建加载的loading效果\r\n\tshowLoading() {\r\n\t\tconst isShowLoading = uni.getStorageSync('isShowLoading')\r\n\t\tif (isShowLoading) {\r\n\t\t\tuni.hideLoading()\r\n\t\t\tuni.setStorageSync('isShowLoading', false)\r\n\t\t}\r\n\t\tuni.showLoading({\r\n\t\t\ttitle: \"加载中...\",\r\n\t\t\tcomplete: function() {\r\n\t\t\t\tuni.setStorageSync('isShowLoading', true)\r\n\t\t\t},\r\n\t\t\tfail: () => {\r\n\t\t\t\tuni.setStorageSync('isShowLoading', false)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\nexport default new Utils()"],"names":["uni","res"],"mappings":";;AAAA,MAAM,MAAM;AAAA,EAEX,cAAc;AACb,SAAK,UAAU;AAAA,EACf;AAAA;AAAA,EAGD,cAAc;AAEbA,kBAAAA,MAAI,MAAM;AAAA,MACT,SAAS,SAAO;AACf,aAAK,QAAQ;AAAA,UACZ,KAAK;AAAA,UACL,MAAM;AAAA,YACL,WAAW;AAAA,YACX,aAAa;AAAA,YACb,gBAAgB;AAAA,YAChB,iBAAiB;AAAA,UACjB;AAAA,UACD,QAAQ;AAAA,UACR,SAAS,CAAAC,SAAO;AACfD,0BAAAA,+CAAYC,MAAK,KAAK;AAAA,UACtB;AAAA,UACD,MAAM,CAAAA,SAAO;AACZD,0BAAAA,+CAAYC,MAAK,MAAM;AAAA,UACvB;AAAA,QACN,CAAK;AAAA,MACD;AAAA,IACJ,CAAG;AAAA,EACD;AAAA,EAED,QAAQ,SAAS;AAAA,IAChB,aAAa;AAAA,EACf,GAAI;AAEF,QAAI,CAAC,OAAO,KAAK;AAChB,aAAO;AAAA,IACP;AACD,QAAI,OAAO,aAAa;AACvB,WAAK,YAAa;AAAA,IAClB;AACDD,kBAAAA,MAAI,QAAQ;AAAA,MACX,KAAK,KAAK,UAAU,OAAO;AAAA,MAC3B,MAAM,OAAO,OAAO,OAAO,OAAO,CAAE;AAAA,MACpC,QAAQ,OAAO,SAAS,OAAO,SAAS,CAAE;AAAA,MAC1C,QAAQ,OAAO,SAAS,OAAO,SAAS;AAAA,MACxC,SAAS,CAAC,aAAa;AACtBA,sBAAAA,MAAI,YAAa;AAEjB,YAAI,SAAS,KAAK,SAAS;AAE1B,cAAI,OAAO,WAAW,OAAO,OAAO,WAAW,YAAY;AAC1D,mBAAO,QAAQ,QAAQ;AAAA,UACvB;AAAA,QACN,OAAW;AAGN,cAAI,OAAO,QAAQ,OAAO,OAAO,QAAQ,YAAY;AACpD,mBAAO,KAAK,QAAQ;AAAA,UACpB;AAAA,QAED;AAAA,MACD;AAAA,MACD,MAAM,cAAY;AACjBA,sBAAAA,MAAI,YAAa;AACjBA,sBAAAA,MAAA,MAAA,OAAA,4BAAY,QAAQ;AAAA,MACpB;AAAA,IACJ,CAAG;AAAA,EACD;AAAA;AAAA,EAED,cAAc;AACb,UAAM,gBAAgBA,cAAAA,MAAI,eAAe,eAAe;AACxD,QAAI,eAAe;AAClBA,oBAAAA,MAAI,YAAa;AACjBA,0BAAI,eAAe,iBAAiB,KAAK;AAAA,IACzC;AACDA,kBAAAA,MAAI,YAAY;AAAA,MACf,OAAO;AAAA,MACP,UAAU,WAAW;AACpBA,4BAAI,eAAe,iBAAiB,IAAI;AAAA,MACxC;AAAA,MACD,MAAM,MAAM;AACXA,4BAAI,eAAe,iBAAiB,KAAK;AAAA,MACzC;AAAA,IACJ,CAAG;AAAA,EACD;AACF;AACA,MAAA,UAAe,IAAI,MAAK;;"}